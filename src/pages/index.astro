---
import Base from '../layouts/Base.astro'
import Navbar from '../components/Navbar.svelte'
import PortfolioSummary from '../components/PortfolioSummary.svelte'
import PortfolioSummaryTable from '../components/PortfolioSummaryTable.svelte'
import DividendTracker from '../components/DividendTracker.svelte'
import YearlyDividendSummary from '../components/YearlyDividendSummary.svelte'
import QuickStats from '../components/QuickStats.svelte'
import AssetAllocation from '../components/AssetAllocation.svelte'
import PortfolioBreakdown from '../components/PortfolioBreakdown.svelte'
import HoldingsTable from '../components/HoldingsTable.svelte'

import { holdings, portfolio } from '../lib/data/mock.js'
---

<Base>
  <Navbar client:load />

  <main class="max-w-7xl mx-auto px-4 py-4 main-grid">
    <!-- Top: Summary -->
    <PortfolioSummary totalValue={portfolio.totalValue} totalCost={portfolio.totalCost} todayChange={portfolio.todayChange} />

    <!-- Middle row: Dividend + Summary Table -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
      <div class="lg:col-span-1"><DividendTracker /></div>
      <div class="lg:col-span-2"><PortfolioSummaryTable /></div>
    </div>

    <!-- Stats row -->
    <div class="grid grid-cols-1 gap-4">
      <QuickStats holdings={holdings} />
    </div>

    <!-- Allocation + Breakdown with consistent styling, no totals -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <AssetAllocation />
      <PortfolioBreakdown />
    </div>

    <!-- Holdings table -->
    <HoldingsTable rows={holdings} />
  </main>
</Base>
